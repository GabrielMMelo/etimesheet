{% load static %}
<!DOCTYPE html>

<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<title>Timesheet</title>

	<link rel="stylesheet" type="text/css" href="{% static 'bootstrap/css/bootstrap.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'style/table.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'style/main.css' %}">
</head>

<body>
	<nav class="navbar navbar-expand-md bg-light navbar-light">
		<div class="navbar-collapse collapse" id="navbarSite">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item">
					<a id="navbarImg" href="{% url 'index' %}">
						<img src="{% static 'logo_emakers_preta.png' %}" height="40em">
					</a>
				</li>
				<li class="nav-item ml-3 mr-5">
					<a class="nav-link navbar-brand" href="{% url 'index' %}">Timesheet</a>
				</li>
			</ul>
			<a class="navbar-item navbar-text" href="{% url 'index' %}">Meu Horário</a>
		<div class="navbar-collapse collapse">
			<ul class="navbar-nav ml-auto">
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Bem vindo, {{ user }}
						<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li>
							<a class="dropdown-item" href="{% url 'account_logout' %}">Sair</a>
						</li>
					</ul>
				</li>
			</ul>
		</div>
		</div>
	</nav>

	<div class="container pt-2">
		<div class="table-responsive-sm">
		<!-- Form search -->
		{% block search %} {% endblock %}

		<table id="horario" class="table table-striped table-bordered">
			<thead>
				<tr>
					<th>Horário</th>
					<th>Dom</th>
					<th>Seg</th>
					<th>Ter</th>
					<th>Qua</th>
					<th>Qui</th>
					<th>Sex</th>
					<th>Sáb</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>07:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>08:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>09:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>10:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>11:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>12:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>13:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>14:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>15:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>16:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>17:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>18:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>19:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>20:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>21:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td>22:00</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
			</tbody>
		</table>
		</div>
	</div>

	<!-- Printa o resultado na tabela -->
	{% for h in timetable %}
	<script type="text/javascript">
		var x = document.getElementById("horario").rows[{{ h.row }} ].cells[{{ h.column }} ];
		if (x.innerText){
			x.innerHTML += ", ";
		}
		x.innerHTML += "{{ h.person.user.first_name }}";
	</script> 
	{% endfor %}

	<!-- Processa o resultado e coloca cor vermelho (conflito) e verde (horario livre)-->
	{% block result %} {% endblock %}

	<!-- MODAL -->
	{% block modal %} {% endblock %}

	<!-- Errors messages-->
	{% if messages %}
		<script>
		{% for message in messages %}
			alert("{{ message }}");
		{% endfor %}
		</script>
	{% endif %}	

	<!-- JS scripts -->
	{% block scripts %} {% endblock %}

	<script src="{% static 'jquery/dist/jquery.min.js' %}"></script>
	<script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
	
</body>